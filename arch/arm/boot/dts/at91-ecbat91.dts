/*
 * at91-ecbat91.dts - Device Tree file for ecbat91 board
 *
 * Copyright (C) 2013 Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
 *
 * Licensed under GPLv2 only
 */
/dts-v1/;
#include "at91rm9200_pqfp.dtsi"

/ {
	model = "emQbit's ECB_AT91";
	compatible = "emqbit,ecb-at91", "atmel,at91rm9200-pqfp", "atmel,at91rm9200";

	clocks {
		#address-cells = <1>;
		#size-cells = <1>;
		ranges;

		main_clock: clock@0 {
			compatible = "atmel,osc", "fixed-clock";
			clock-frequency = <18432000>;
		};
	};

	ahb {
		apb {
			dbgu: serial@fffff200 {
				status = "okay";
			};

			usart0: serial@fffc0000 {
				status = "okay";
			};

			macb0: ethernet@fffbc000 {
				phy-mode = "mii";
				status = "okay";
				/* phy irq on PC4 */
				pinctrl-0 = <&pinctrl_macb_rmii &pinctrl_macb_rmii_mii>;
			};

			mmc0: mmc@fffb4000 {
				pinctrl-0 = <
					&pinctrl_mmc0_clk
					&pinctrl_mmc0_slot0_cmd_dat0
					&pinctrl_mmc0_slot0_dat1_3>;
				status = "okay";
				slot@0 {
					reg = <0>;
					bus-width = <4>;
				};
			};

			spi0: spi@fffe0000 {
				status = "okay";
				cs-gpios =
					<&pioA 3 GPIO_ACTIVE_HIGH>,
					<&pioA 4 GPIO_ACTIVE_HIGH>,
					<&pioA 5 GPIO_ACTIVE_HIGH>,
					<&pioA 6 GPIO_ACTIVE_HIGH>;

				mtd_dataflash@0 {
					compatible = "atmel,at45", "atmel,dataflash";
					spi-max-frequency = <10000000>;
					reg = <0>;
					#address-cells = <1>;
					#size-cells = <1>;

					darrell_loader@0 {
						label = "Darrell-loade";
						reg = <0x00000 0x3180>;
					};

					uboot@3180 {
						label = "U-boot";
						reg = <0x3180 0x1C5C0>;
					};

					ubootenv@1F740 {
						label = "UBoot-env";
						reg = <0x1F740 0x2100>;
					};

					kernel@21840  {
						label = "Kernel";
						reg = <0x21840 0x18B7C0>;
					};

					filesystem@1ad000  {
						label = "Filesystem";
						reg = <0x1ad000 0x53000>;
					};
				};

				spidev@1 {
					compatible = "spidev";
					spi-max-frequency = <2500000>;
					reg = <1>;
				};

				spidev@2 {
					compatible = "spidev";
					spi-max-frequency = <1000000>;
					reg = <2>;
				};

				spidev@3 {
					compatible = "spidev";
					spi-max-frequency = <10000000>;
					reg = <3>;
				};
			};
		};

		usb0: ohci@00300000 {
			num-ports = <1>;
			status = "okay";
		};
	};

	leds {
		compatible = "gpio-leds";

		led1 {
			label = "led1";
			gpios = <&pioC 7 GPIO_ACTIVE_LOW>;
			linux,default-trigger = "heartbeat";
		};
	};

	i2c@0 {
		status = "okay";
	};
};
